<VirtualHost _default_:80>
  ServerName    oidc-proxy.localtest.me

  OIDCProviderMetadataURL http://keycloak.localtest.me:8080/auth/realms/sample-oidc/.well-known/openid-configuration
  OIDCClientID sample-app
  OIDCClientSecret d195afd9-8425-49e8-83da-126e0fdfa102

  # OIDCRedirectURI is a vanity URL that must point to a path protected by this module but must NOT point to any content
  OIDCRedirectURI http://oidc-proxy.localtest.me:10080/redirect_uri
  OIDCCryptoPassphrase password

  # OIDCRemoteUserClaim email
  OIDCScope "openid email profile roles"

  <Location />
    AuthType openid-connect
    Require valid-user
  </Location>

  <Location /admin/>
    AuthType openid-connect
    Require claim "realm_access.roles:admin"
  </Location>

  <Location /developer/>
    AuthType openid-connect
    Require claim "realm_access.roles:developer"
  </Location>

  <Location /support/>
    AuthType openid-connect
    Require claim "realm_access.roles:support"
  </Location>

</VirtualHost>
